<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>

<canvas id="ctx" width="800" height="800" style="border:1px solid #000000;"></canvas>

<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
<script type="text/javascript">
		var ctx = document.getElementById("ctx").getContext("2d");
		ctx.height = window.innerHeight;
		ctx.width = window.innerWidth;
		ctx.font = '30px Arial';

	var socket = io();

	//Get the new position
	socket.on('newPlayerData',function(data){
		ctx.clearRect(20,18,760,104);

		//Draw a rectangle for the health bar
		ctx.beginPath();
		ctx.lineWidth="4";
		ctx.strokeStyle="black";
		ctx.rect(20, 18, 760, 104);	//Added two to the Y because of the 4px border
		ctx.stroke();

		//Health bar
		ctx.beginPath();
		var healthBar_gradient=ctx.createLinearGradient(0,0,600,0);
		healthBar_gradient.addColorStop(0,"red");
		healthBar_gradient.addColorStop(1,"green");
		ctx.fillStyle=healthBar_gradient;
		ctx.fillRect(20, 20, healthToWidth(data.health), 100);
		ctx.stroke();

		ctx.strokeStyle="black";
		ctx.fillText(data.health, 100, 100);
	});

	socket.on('newTask',function(data){
		ctx.clearRect(0, 400, 800, 800);
		ctx.fillStyle = "black";
		ctx.fillText(data.displayName, 50, 600);
		console.log(data.displayName);
	});

function healthToWidth(health){
	totalWidth = 760 / 100 * health;
	return totalWidth;
}
</script>

</body>
</html>