<!DOCTYPE html>
<html>
<head>
	<link href="https://fonts.googleapis.com/css?family=Orbitron:400,700" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="/client/style.css">
	<title></title>
</head>
<body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>

<div class="row">
	<!--Maybe for a timer or something -->
	<div class="col-sm-1">
	</div>

	<div class="col-sm-10">
		<div id="healthBarWrapper">
			<div id="healthBar"></div>
			<p id="healthText">100%</p>
		</div>
	</div>

	<div class="col-sm-1">
	</div>
</div>

<div class="row">
	<div class="col-sm-1">
	</div>

	<div class="col-sm-10">
		<p id="task">Task 1</p>
	</div>

	<div class="col-sm-1">
	</div>
</div>

<div class="row">
	<div class="col-sm-4 boardElement" id="element1">
	</div>
	<div class="col-sm-4 boardElement" id="element2">
	</div>
	<div class="col-sm-4 boardElement" id="element3">
	</div>
	<div class="col-sm-4 boardElement" id="element4">
	</div>
	<div class="col-sm-4 boardElement" id="element5">
	</div>
	<div class="col-sm-4 boardElement" id="element6">
	</div>
	<div class="col-sm-4 boardElement" id="element7">
	</div>
	<div class="col-sm-4 boardElement" id="element8">
	</div>
	<div class="col-sm-4 boardElement" id="element9">
	</div>
	<script type="text/javascript">

		var socket = io();

		socket.on('newBoard', function(data){
			console.log(data.length);
			for(var i = 1;i < data.length;i++){
				console.log(data[i]);
				console.log(data[i].optionCount);
				if(data[i].elementType === "toggleSwitch"){
					document.getElementById("element" + i).innerHTML = '<div><p>Lorem Ipsum</p><img src="/client/img/toggleSwitchOff.png" class="img-responsive toggleSwitchImg"></div>';
				}else if(data[i].elementType === "button"){
					document.getElementById("element" + i).innerHTML = '<div><p>Lorem Ipsum</p><img src="/client/img/button.png" class="img-responsive buttonImg"></div>';
				}else if(data[i].elementType === "slider"){
					var inputMarkers = null;
					for(var j = 0;j < data[i].optionCount;j++){
						if(inputMarkers == null){
							inputMarkers = "<td>" + j + "</td>"
						}else{
							inputMarkers = inputMarkers + "<td>" + j + "</td>";
						}
					}
					console.log(inputMarkers);
					document.getElementById("element" + i).innerHTML = '<div><p>Lorem Ipsum</p><input type="range" min="0" max="' + (data[i].optionCount - 1) + '" value="0" step="1"/><table class="markers"><tr>' + inputMarkers + '</tr></table></div>';
				}
			}
		});
	</script>
</div>
<script type="text/javascript">
	socket.on('newPlayerData', function(data){
		updateHealthBar(data.health);
	});

	function updateHealthBar(newHealth){
		document.getElementById("healthBar").style.width= newHealth + "%";
		document.getElementById("healthText").innerHTML = newHealth + "%";
	}


	socket.on('newTask', function(data){
		updateTask(data.displayName);
	});

	function updateTask(newTask){
		document.getElementById("task").innerHTML = newTask;
	}
</script>

<!--<canvas id="ctx"></canvas>-->

<!--<script type="text/javascript">
	var ctx = document.getElementById("ctx").getContext("2d");
	document.getElementById("ctx").height = window.innerHeight;
	document.getElementById("ctx").width = window.innerWidth;
	ctx.font = '30px Arial';

	var socket = io();

	//Get the new position
	socket.on('newPlayerData',function(data){
		ctx.clearRect(20,18,760,104);

		//Draw a rectangle for the health bar
		ctx.beginPath();
		ctx.lineWidth="4";
		ctx.strokeStyle="black";
		ctx.rect(20, 18, 760, 104);	//Added two to the Y because of the 4px border
		ctx.fillRect(0, 0, window.innerWidth, window.innerHeight);	//Added two to the Y because of the 4px border
		ctx.stroke();

		//Health bar
		ctx.beginPath();
		var healthBar_gradient=ctx.createLinearGradient(0,0,600,0);
		healthBar_gradient.addColorStop(0,"red");
		healthBar_gradient.addColorStop(1,"green");
		ctx.fillStyle=healthBar_gradient;
		ctx.fillRect(20, 20, healthToWidth(data.health), 100);
		ctx.stroke();

		ctx.strokeStyle="black";
		ctx.fillText(data.health, 100, 100);
	});

	socket.on('newTask',function(data){
		ctx.clearRect(0, 400, 800, 800);
		ctx.fillStyle = "black";
		ctx.fillText(data.displayName, 50, 600);
		console.log(data.displayName);
	});

function healthToWidth(health){
	totalWidth = 760 / 100 * health;
	return totalWidth;
}
</script>-->

</body>
</html>